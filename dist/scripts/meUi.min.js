$(function(){"use strict";meui.initModule({ishash:!0,url:"json",api:"",tpl:"tpl",container:$("#main")})});var meui=function(){"use strict";var t=function(t){meui.shell.initModule(t),meui.aspectratio.initModule({}),meui.animated.initModule(),meui.Callback.initModule()};return{initModule:t}}();meui.exists=function(t){"use strict";return $(t).length>0},meui.copyright=function(){"use strict";var t=function(){var t="";console.log(t)};return{initModule:t}}(),meui.util=function(){"use strict";var t,e;return t=function(t,e,i){var n=new Error;return n.name=t,n.message=e,i&&(n.data=i),n},e=function(e){var i,n,a=e.input_map,o=e.settable_map,r=e.config_map;for(i in a)if(a.hasOwnProperty(i)){if(!o.hasOwnProperty(i))throw n=t("Bad Input","Setting config key |"+i+"| is not supported");r[i]=a[i]}},{makeError:t,setConfigMap:e}}(),meui.aspectratio=function(t){"use strict";var e,i;return i=function(){meui.exists(".container_aspectratio")&&t(".container_aspectratio").each(function(){var e=t(this),i=t(window).width(),n=parseFloat(t(this).attr("data-aspectratio")),a=t(this).attr("data-aspecttype"),o=t(this).attr("data-aspectelement");switch(a){case"winwidth_height_auto":e.height(i/n-2);break;case"winwidth_width_auto":e.width(i/n);break;case"thiswidth_height_auto":e.height(e.width()/n);break;case"winwidth_incon_imgwidth_auto":e.find("img").each(function(){var e=parseFloat(t(this).attr("data-aspectratio"));t(this).width(i/e)});break;case"winwidth_incon_elementheight_auto":e.find(o).each(function(){t(this).height(i/n)});break;default:e.height(i/n-2)}})},e=function(){i(),t(document).ready(function(){i()})},{initModule:e}}(jQuery),meui.viewport=function(t){t.belowthefold=function(e,i){var n=t(window).height()+t(window).scrollTop();return n<=t(e).offset().top-i.threshold},t.abovethetop=function(e,i){var n=t(window).scrollTop();return n>=t(e).offset().top+t(e).height()-i.threshold},t.rightofscreen=function(e,i){var n=t(window).width()+t(window).scrollLeft();return n<=t(e).offset().left-i.threshold},t.leftofscreen=function(e,i){var n=t(window).scrollLeft();return n>=t(e).offset().left+t(e).width()-i.threshold},t.inviewport=function(e,i){return!(t.rightofscreen(e,i)||t.leftofscreen(e,i)||t.belowthefold(e,i)||t.abovethetop(e,i))},t.extend(t.expr[":"],{"below-the-fold":function(e){return t.belowthefold(e,{threshold:0})},"above-the-top":function(e){return t.abovethetop(e,{threshold:0})},"left-of-screen":function(e){return t.leftofscreen(e,{threshold:0})},"right-of-screen":function(e){return t.rightofscreen(e,{threshold:0})},"in-viewport":function(e){return t.inviewport(e,{threshold:0})}})}(jQuery),meui.animated=function(t){"use strict";var e,i;return i=function(){meui.exists(".animate-element")&&t(".animate-element:in-viewport").each(function(e){var i=t(this);i.hasClass("in-viewport")||setTimeout(function(){i.addClass("in-viewport")},100*e)}),t(".animate-element:below-the-fold").each(function(e){var i=t(this);i.hasClass("in-viewport")&&setTimeout(function(){i.removeClass("in-viewport")},100*e)})},e=function(){i(),t(window).scroll(function(){i()})},{initModule:e}}(jQuery),meui.shell=function(){"use strict";var t,e,i={ishash:!1,container:null,url:"/",api:"api.php/",tpl:""},n={};return t=function(){var t=i.container,e=i.ishash,a=i.tpl,o=i.url,r=i.api;n={$container:t,$ishash:e,$tpl:a,$url:o,$api:r}},e=function(e){i.ishash=e.ishash,i.container=e.container,i.url=e.url,i.api=e.api,i.tpl=e.tpl,t(),n.$ishash?(console.log("hash is done"),meui.hashset.initModule(n)):console.log("hash is close")},{initModule:e}}(),meui.loadMore=function(){var t,e,i,n={_default:"",_loading:null,_item:"",_more:""},a={};return i=function(){var t=n._default,e=n._loading,i=n._item,o=n._more;a={$default:t,$loading:e,$item:i,$more:o}},e=function(){var t,e=$(a.$item),i=$(a.$item).length;i>a.$default?t=a.$default:(t=i,$(a.$more).hide());for(var n=0;t>n;n++)e.eq(n).show()},loadMore=function(){var t=$(a.$item),e=$(a.$item).length,i=$(a.$item+":visible").length;i==e&&$(a.$more).html("全部加载完毕");for(var n=0;n<a.$loading;n++)t.eq(i+n).show(),meui.aspectratio.initModule({}),i+n==e&&$(a.$more).html("全部加载完毕")},t=function(t,o,r,s){n._default=t,n._loading=o,n._item=r,n._more=s,i(),$(a.$item).hide(),e(),$(a.$more).click(function(){loadMore()})},{initModule:t}}(),meui.hashset=function(){"use strict";var t,e,i,n,a={hasharry:"",hash:null,hashmain:"",container:"",catid:null,tempindex:"",type:"",tpl:"",url:"",api:""},o={};return n=function(){var t=a.hasharry,e=a.hash,i=a.hashmain,n=a.container,r=a.catid,s=a.tempindex,h=a.type,l=a.tpl,u=a.url,c=a.api;o={$hasharry:t,$hash:e,$hashmain:i,$catid:r,$tempindex:s,$type:h,$container:n,$tpl:l,$url:u,$api:c}},e=function(){""!=o.$hasharry?(o.$hash=o.$hasharry[1].split("/"),o.$hash.length>0&&(o.$catid=o.$hash[3],o.$tempindex=o.$hash[1],o.$type=o.$hash[2],o.$hashmain=o.$hash[0])):o.$hash=""},i=function(){a.hasharry=location.hash.split("#"),n(),e(),meui.medel.initModule(o),meui.animated.initModule()},t=function(t){a.container=t.$container,a.tpl=t.$tpl,a.url=t.$url,a.api=t.$api,n(),$(window).unbind("hashchange").bind("hashchange",i).trigger("hashchange")},{initModule:t}}(),meui.templates=function(){"use strict";var stateMap={tpl:"",hashmain:"",container:"",tempindex:""},initModule,jqueryMap={},setJqueryMap,jqueryMap,settemplates,loadtemplates,loadAction,reload,svgan;return setJqueryMap=function(){var t=stateMap.hashmain,e=stateMap.tpl,i=stateMap.container,n=stateMap.tempindex;jqueryMap={$hashmain:t,$tpl:e,$container:i,$tempindex:n}},loadAction=function(data){var actionstr="";actionstr=jqueryMap.$hashmain?"meui."+jqueryMap.$hashmain+"_action.initModule(data,jqueryMap);":"meui.Index_action.initModule(data,jqueryMap);",eval(actionstr),meui.aspectratio.initModule({})},loadtemplates=function(){$(jqueryMap.$container).css("min-height",$(window).height()-$("header").height()+"px"),$.get("./"+jqueryMap.$tpl+"/Load_tmp.html",function(t){var e=$.templates(t),i=e.render();$("title").html("加载中-meUI"),$(jqueryMap.$container).html(i),svgan(),$("article").addClass("in-viewport"),reload()})},svgan=function(){$(".squiggle-animated path").each(function(){var t=$(this)[0],e=t.getTotalLength();t.style.transition=t.style.WebkitTransition="none",t.style.strokeDasharray=e+" "+e,t.style.strokeDashoffset=e,t.getBoundingClientRect(),t.style.transition=t.style.WebkitTransition="stroke-dashoffset 2s ease-in-out",t.style.strokeDashoffset="0"})},reload=function(){$("html, body").animate({scrollTop:0},"slow")},settemplates=function(t){console.log(jqueryMap.$hashmain),""!=jqueryMap.$hashmain?"show"==jqueryMap.$tempindex?$.get("./"+jqueryMap.$tpl+"/"+jqueryMap.$hashmain+"_main_tmp.html",function(e){var i=$.templates(e),n=i.render(t);$(jqueryMap.$container).html(n),loadAction(t),$("article").addClass("in-viewport")}):$.get("./"+jqueryMap.$tpl+"/"+jqueryMap.$hashmain+"_tmp.html",function(e){var i=$.templates(e),n=i.render(t);$(jqueryMap.$container).html(n),loadAction(t),meui.aspectratio,$("article").addClass("in-viewport")}):$.get("./"+jqueryMap.$tpl+"/Index_tmp.html",function(e){var i=$.templates(e),n=i.render(t);$("title").html("首页-meUI"),$(jqueryMap.$container).html(n),loadAction(t),$("article").addClass("in-viewport")})},initModule=function(t,e){stateMap.container=t.$container,stateMap.tpl=t.$tpl,stateMap.hashmain=t.$hashmain,stateMap.tempindex=t.$tempindex,setJqueryMap(),loadtemplates(),setTimeout(function(){settemplates(e)},2500)},{initModule:initModule}}(),meui.medel=function(){"use strict";var t,e,i,n={tpl:"",hashmain:"",container:"",tempindex:"",hasharry:null},a={};return t=function(){var t=n.url,e=n.api,i=n.hashmain,o=n.hasharry,r=n.container,s=n.tempindex,h=n.tpl;a={$url:t,$api:e,$hasharry:o,$hashmain:i,$container:r,$tempindex:s,$tpl:h}},i=function(){if(""!=a.$hasharry)if("show"==a.$tempindex)var t=a.$url+a.$api+"/"+a.$hashmain+"_show.json";else var t=a.$url+a.$api+"/"+a.$hashmain+".json";else var t=a.$url+a.$api+"/Index.json";$.getJSON(t,function(t){"118"===t.err_code&&meui.templates.initModule(a,t)})},e=function(e){n.url=e.$url,n.api=e.$api,n.hasharry=e.$hasharry,n.hashmain=e.$hashmain,n.container=e.$container,n.tpl=e.$tpl,n.tempindex=e.$tempindex,t(),i()},{initModule:e}}();